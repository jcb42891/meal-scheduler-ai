{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.groups": {
      "name": "groups",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "owner_id": {
          "name": "owner_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "groups_owner_id_fkey": {
          "name": "groups_owner_id_fkey",
          "tableFrom": "groups",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "owner_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Authenticated users can create groups": {
          "name": "Authenticated users can create groups",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "(auth.uid() = owner_id)"
        },
        "Group owners can delete their groups": {
          "name": "Group owners can delete their groups",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        },
        "Users can view their groups": {
          "name": "Users can view their groups",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.profiles": {
      "name": "profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "first_name": {
          "name": "first_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_name": {
          "name": "last_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "profiles_id_fkey": {
          "name": "profiles_id_fkey",
          "tableFrom": "profiles",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Enable delete for users based on id": {
          "name": "Enable delete for users based on id",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ],
          "using": "(auth.uid() = id)"
        },
        "Enable insert for authenticated users": {
          "name": "Enable insert for authenticated users",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Enable update for users based on id": {
          "name": "Enable update for users based on id",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Profiles are viewable by everyone": {
          "name": "Profiles are viewable by everyone",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.ingredients": {
      "name": "ingredients",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "ingredients_name_key": {
          "columns": [
            "name"
          ],
          "nullsNotDistinct": false,
          "name": "ingredients_name_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Anyone can view ingredients": {
          "name": "Anyone can view ingredients",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "true"
        },
        "Users can create ingredients": {
          "name": "Users can create ingredients",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.meal_calendar": {
      "name": "meal_calendar",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "meal_id": {
          "name": "meal_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "group_id": {
          "name": "group_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "date": {
          "name": "date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "meal_calendar_group_id_fkey": {
          "name": "meal_calendar_group_id_fkey",
          "tableFrom": "meal_calendar",
          "tableTo": "groups",
          "schemaTo": "public",
          "columnsFrom": [
            "group_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "meal_calendar_meal_id_fkey": {
          "name": "meal_calendar_meal_id_fkey",
          "tableFrom": "meal_calendar",
          "tableTo": "meals",
          "schemaTo": "public",
          "columnsFrom": [
            "meal_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "meal_calendar_group_id_date_key": {
          "columns": [
            "group_id",
            "date"
          ],
          "nullsNotDistinct": false,
          "name": "meal_calendar_group_id_date_key"
        }
      },
      "checkConstraints": {},
      "policies": {
        "Users can view meal_calendar entries for their groups": {
          "name": "Users can view meal_calendar entries for their groups",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "(EXISTS ( SELECT 1\n   FROM group_members\n  WHERE ((group_members.group_id = meal_calendar.group_id) AND (group_members.user_id = auth.uid()))))"
        },
        "Users can manage meal_calendar entries for their groups": {
          "name": "Users can manage meal_calendar entries for their groups",
          "as": "PERMISSIVE",
          "for": "ALL",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.group_invitations": {
      "name": "group_invitations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "group_id": {
          "name": "group_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "invited_by": {
          "name": "invited_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "group_invitations_group_id_fkey": {
          "name": "group_invitations_group_id_fkey",
          "tableFrom": "group_invitations",
          "tableTo": "groups",
          "schemaTo": "public",
          "columnsFrom": [
            "group_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "group_invitations_invited_by_fkey": {
          "name": "group_invitations_invited_by_fkey",
          "tableFrom": "group_invitations",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "invited_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Anyone can view their own invitations": {
          "name": "Anyone can view their own invitations",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "((email = (auth.jwt() ->> 'email'::text)) OR (invited_by = auth.uid()) OR (EXISTS ( SELECT 1\n   FROM group_members\n  WHERE ((group_members.group_id = group_invitations.group_id) AND (group_members.user_id = auth.uid())))))"
        },
        "Group members can create invitations": {
          "name": "Group members can create invitations",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can accept their own invitations": {
          "name": "Users can accept their own invitations",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.meals": {
      "name": "meals",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "group_id": {
          "name": "group_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "meals_created_by_fkey": {
          "name": "meals_created_by_fkey",
          "tableFrom": "meals",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "meals_group_id_fkey": {
          "name": "meals_group_id_fkey",
          "tableFrom": "meals",
          "tableTo": "groups",
          "schemaTo": "public",
          "columnsFrom": [
            "group_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can create meals in their groups": {
          "name": "Users can create meals in their groups",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM group_members\n  WHERE ((group_members.group_id = meals.group_id) AND (group_members.user_id = auth.uid()))))"
        },
        "Users can delete meals in their groups": {
          "name": "Users can delete meals in their groups",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        },
        "Users can update meals in their groups": {
          "name": "Users can update meals in their groups",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": [
            "public"
          ]
        },
        "Users can view meals in their groups": {
          "name": "Users can view meals in their groups",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.group_members": {
      "name": "group_members",
      "schema": "",
      "columns": {
        "group_id": {
          "name": "group_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "group_members_group_id_fkey": {
          "name": "group_members_group_id_fkey",
          "tableFrom": "group_members",
          "tableTo": "groups",
          "schemaTo": "public",
          "columnsFrom": [
            "group_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "group_members_user_id_fkey": {
          "name": "group_members_user_id_fkey",
          "tableFrom": "group_members",
          "tableTo": "profiles",
          "schemaTo": "public",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "group_members_pkey": {
          "name": "group_members_pkey",
          "columns": [
            "user_id",
            "group_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Anyone can view group members": {
          "name": "Anyone can view group members",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ],
          "using": "true"
        },
        "Group owners can manage members": {
          "name": "Group owners can manage members",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        },
        "Users can join groups via invitation": {
          "name": "Users can join groups via invitation",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ]
        },
        "Users can manage their own membership": {
          "name": "Users can manage their own membership",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    },
    "public.meal_ingredients": {
      "name": "meal_ingredients",
      "schema": "",
      "columns": {
        "meal_id": {
          "name": "meal_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "ingredient_id": {
          "name": "ingredient_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "unit": {
          "name": "unit",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {
        "meal_ingredients_ingredient_id_fkey": {
          "name": "meal_ingredients_ingredient_id_fkey",
          "tableFrom": "meal_ingredients",
          "tableTo": "ingredients",
          "schemaTo": "public",
          "columnsFrom": [
            "ingredient_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "meal_ingredients_meal_id_fkey": {
          "name": "meal_ingredients_meal_id_fkey",
          "tableFrom": "meal_ingredients",
          "tableTo": "meals",
          "schemaTo": "public",
          "columnsFrom": [
            "meal_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "meal_ingredients_pkey": {
          "name": "meal_ingredients_pkey",
          "columns": [
            "meal_id",
            "ingredient_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraints": {},
      "policies": {
        "Users can create meal ingredients": {
          "name": "Users can create meal ingredients",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": [
            "public"
          ],
          "withCheck": "(EXISTS ( SELECT 1\n   FROM (meals\n     JOIN group_members ON ((meals.group_id = group_members.group_id)))\n  WHERE ((meals.id = meal_ingredients.meal_id) AND (group_members.user_id = auth.uid()))))"
        },
        "Users can delete meal_ingredients in their groups": {
          "name": "Users can delete meal_ingredients in their groups",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": [
            "public"
          ]
        },
        "Users can view meal ingredients": {
          "name": "Users can view meal ingredients",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": [
            "public"
          ]
        }
      },
      "isRLSEnabled": true
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {}
  }
}